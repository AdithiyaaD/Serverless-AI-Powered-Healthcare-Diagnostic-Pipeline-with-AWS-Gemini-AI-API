  <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MediCare - AI-powered Smart File Upload and Analyzer System</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <style>
    :root {
      --primary-color: #3b82f6;
      --primary-dark: #2563eb;
      --primary-light: #dbeafe;
      --success-color: #10b981;
      --error-color: #ef4444;
      --text-primary: #1f2937;
      --text-secondary: #6b7280;
      --border-color: #e5e7eb;
      --bg-light: #f8fafc;
      --shadow-lg: 0 20px 25px rgba(0,0,0,0.1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px 10px;
      line-height: 1.6;
    }

    .main-container {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: 24px;
      box-shadow: var(--shadow-lg);
      width: 100%;
      max-width: 800px;
      margin: 0 auto;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .header {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      color: white;
      padding: 24px 30px;
      text-align: center;
      border-radius: 24px 24px 0 0;
    }

    .header h1 {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .header p {
      opacity: 0.9;
      font-size: 14px;
    }

    .form-container {
      padding: 30px;
    }

    .section {
      margin-bottom: 30px;
      padding: 20px;
      background: rgba(248, 250, 252, 0.5);
      border-radius: 16px;
      border: 1px solid rgba(59, 130, 246, 0.1);
    }

    .section-title {
      font-size: 18px;
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
      padding-bottom: 10px;
      border-bottom: 2px solid var(--primary-light);
    }

    .form-grid {
      display: grid;
      gap: 16px;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }

    .form-row-3 {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 16px;
    }

    .form-group {
      position: relative;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    label {
      display: block;
      margin-bottom: 6px;
      font-weight: 600;
      color: var(--text-primary);
      font-size: 13px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .required {
      color: var(--error-color);
    }

    input, select, textarea {
      width: 100%;
      padding: 12px 14px;
      border: 2px solid var(--border-color);
      border-radius: 10px;
      font-size: 14px;
      font-family: inherit;
      transition: all 0.3s ease;
      background: white;
    }

    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    textarea {
      resize: vertical;
      min-height: 80px;
    }

    .file-input-wrapper {
      width: 100%;
    }

    .file-input {
      position: absolute;
      left: -9999px;
      opacity: 0;
    }

    .file-input-label {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      padding: 16px;
      border: 2px dashed var(--border-color);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      background: var(--bg-light);
      color: var(--text-secondary);
      font-weight: 500;
      min-height: 60px;
    }

    .file-input-label:hover {
      border-color: var(--primary-color);
      background: var(--primary-light);
      color: var(--primary-color);
    }

    .file-input-label.has-file {
      border-color: var(--success-color);
      background: rgba(16, 185, 129, 0.1);
      color: var(--success-color);
    }

    .file-info {
      margin-top: 8px;
      font-size: 12px;
      color: var(--text-secondary);
      text-align: center;
    }

    .submit-button {
      width: 100%;
      padding: 16px;
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-top: 20px;
    }

    .submit-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
    }

    .submit-button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .loading-spinner {
      display: none;
      width: 20px;
      height: 20px;
      border: 2px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .message {
      margin-top: 20px;
      padding: 16px;
      border-radius: 12px;
      text-align: center;
      font-weight: 500;
      display: none;
    }

    .message.success {
      background: rgba(16, 185, 129, 0.1);
      color: var(--success-color);
      border: 1px solid rgba(16, 185, 129, 0.2);
    }

    .message.error {
      background: rgba(239, 68, 68, 0.1);
      color: var(--error-color);
      border: 1px solid rgba(239, 68, 68, 0.2);
    }

    .progress-bar {
      width: 100%;
      height: 4px;
      background: var(--border-color);
      border-radius: 2px;
      overflow: hidden;
      margin-top: 12px;
      display: none;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary-color), var(--primary-dark));
      width: 0%;
      transition: width 0.3s ease;
    }

    .security-notice {
      background: rgba(59, 130, 246, 0.1);
      border: 1px solid rgba(59, 130, 246, 0.2);
      color: var(--primary-color);
      padding: 12px 16px;
      border-radius: 8px;
      font-size: 13px;
      margin-top: 20px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    @media (max-width: 768px) {
      .form-row, .form-row-3 {
        grid-template-columns: 1fr;
      }
      .form-container {
        padding: 20px;
      }
      .section {
        padding: 15px;
      }
    }
  </style>
</head>
<body>
  <div class="main-container">
    <div class="header">
      <h1>
        <i class="fas fa-hospital-symbol"></i>
        MediCare
      </h1>
      <p>AI-Powered Smart File Upload and Analyzer System</p>
    </div>

    <div class="form-container">
      <form id="uploadForm">
        <div class="section">
          <div class="section-title">
            <i class="fas fa-user"></i>
            Basic Information
          </div>
          <div class="form-grid">
            <div class="form-row">
              <div class="form-group">
                <label for="patient_id">
                  <i class="fas fa-id-card"></i>
                  Patient ID <span class="required">*</span>
                </label>
                <input type="text" id="patient_id" name="patient_id" required placeholder="P12345">
              </div>
              <div class="form-group">
                <label for="name">
                  <i class="fas fa-user"></i>
                  Full Name <span class="required">*</span>
                </label>
                <input type="text" id="name" name="name" required placeholder="John Doe">
              </div>
            </div>

            <div class="form-row-3">
              <div class="form-group">
                <label for="age">
                  <i class="fas fa-calendar-alt"></i>
                  Age <span class="required">*</span>
                </label>
                <input type="number" id="age" name="age" min="0" max="150" required placeholder="25">
              </div>
              <div class="form-group">
                <label for="gender">
                  <i class="fas fa-venus-mars"></i>
                  Gender <span class="required">*</span>
                </label>
                <select id="gender" name="gender" required>
                  <option value="">Select Gender</option>
                  <option value="Male">Male</option>
                  <option value="Female">Female</option>
                  <option value="Other">Other</option>
                </select>
              </div>
              <div class="form-group">
                <label for="dob">
                  <i class="fas fa-birthday-cake"></i>
                  Date of Birth <span class="required">*</span>
                </label>
                <input type="date" id="dob" name="dob" required>
              </div>
            </div>
          </div>
        </div>

        <!-- Contact Information -->
        <div class="section">
          <div class="section-title">
            <i class="fas fa-phone"></i>
            Contact Information
          </div>
          <div class="form-grid">
            <div class="form-row">
              <div class="form-group">
                <label for="phone">
                  <i class="fas fa-phone"></i>
                  Phone Number <span class="required">*</span>
                </label>
                <input type="tel" id="phone" name="phone" required placeholder="+91 98765 43210">
              </div>
              <div class="form-group">
                <label for="emergency_contact">
                  <i class="fas fa-phone-alt"></i>
                  Emergency Contact<span class="required">*</span>
                </label>
                <input type="tel" id="emergency_contact" name="emergency_contact" placeholder="+91 98765 43210">
              </div>
            </div>
            <div class="form-group full-width">
              <label for="email">
                <i class="fas fa-envelope"></i>
                Email Address<span class="required">*</span>
              </label>
              <input type="email" id="email" name="email" placeholder="patient@email.com">
            </div>
            <div class="form-group full-width">
              <label for="address">
                <i class="fas fa-home"></i>
                Address<span class="required">*</span>
              </label>
              <textarea id="address" name="address" placeholder="Complete address"></textarea>
            </div>
          </div>
        </div>

        <!-- Medical Information -->
        <div class="section">
          <div class="section-title">
            <i class="fas fa-notes-medical"></i>
            Medical Information<span class="required">*</span>
          </div>
          <div class="form-grid">
            <div class="form-row">
              <div class="form-group">
                <label for="blood_group">
                  <i class="fas fa-tint"></i>
                  Blood Group<span class="required">*</span>
                </label>
                <select id="blood_group" name="blood_group">
                  <option value="">Select Blood Group</option>
                  <option value="A+">A+</option>
                  <option value="A-">A-</option>
                  <option value="B+">B+</option>
                  <option value="B-">B-</option>
                  <option value="AB+">AB+</option>
                  <option value="AB-">AB-</option>
                  <option value="O+">O+</option>
                  <option value="O-">O-</option>
                </select>
              </div>
              <div class="form-group">
                <label for="marital_status">
                  <i class="fas fa-heart"></i>
                  Marital Status<span class="required">*</span>
                </label>
                <select id="marital_status" name="marital_status">
                  <option value="">Select Status</option>
                  <option value="Single">Single</option>
                  <option value="Married">Married</option>
                  <option value="Divorced">Divorced</option>
                  <option value="Widowed">Widowed</option>
                </select>
              </div>
            </div>
            <div class="form-group full-width">
              <label for="medical_history">
                <i class="fas fa-notes-medical"></i>
                Medical History / Allergies<span class="required">*</span>
              </label>
              <textarea id="medical_history" name="medical_history" placeholder="Any known allergies or medical history"></textarea>
            </div>
          </div>
        </div>

        <!-- Hospital Information -->
        <div class="section">
          <div class="section-title">
            <i class="fas fa-hospital"></i>
            Hospital Information
          </div>
          <div class="form-grid">
            <div class="form-row">
              <div class="form-group">
                <label for="department">
                  <i class="fas fa-hospital"></i>
                  Department <span class="required">*</span>
                </label>
                <select id="department" name="department" required>
                  <option value="">Select Department</option>
                  <option value="Cardiology">Cardiology</option>
                  <option value="Neurology">Neurology</option>
                  <option value="Orthopedics">Orthopedics</option>
                  <option value="Pediatrics">Pediatrics</option>
                  <option value="Emergency">Emergency</option>
                  <option value="General Medicine">General Medicine</option>
                </select>
              </div>
              <div class="form-group">
                <label for="doctor_name">
                  <i class="fas fa-user-md"></i>
                  Attending Doctor<span class="required">*</span>
                </label>
                <input type="text" id="doctor_name" name="doctor_name" placeholder="Dr. Smith">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="document_type">
                  <i class="fas fa-file-medical"></i>
                  Document Type <span class="required">*</span>
                </label>
                <select id="document_type" name="document_type" required>
                  <option value="">Select Document Type</option>
                  <option value="Medical Report">Medical Report</option>
                  <option value="Lab Results">Lab Results</option>
                  <option value="X-Ray">X-Ray</option>
                  <option value="MRI Scan">MRI Scan</option>
                  <option value="Prescription">Prescription</option>
                </select>
              </div>
              <div class="form-group">
                <label for="priority">
                  <i class="fas fa-exclamation-triangle"></i>
                  Priority Level<span class="required">*</span>
                </label>
                <select id="priority" name="priority">
                  <option value="Normal">Normal</option>
                  <option value="High">High</option>
                  <option value="Urgent">Urgent</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <!-- File Upload -->
        <div class="section">
          <div class="section-title">
            <i class="fas fa-file-upload"></i>
            Document Upload
          </div>
          <div class="form-grid">
            <div class="form-group full-width">
              <label for="file">
                <i class="fas fa-file-upload"></i>
                Medical Document <span class="required">*</span>
              </label>
              <div class="file-input-wrapper">
                <input type="file" id="file" name="file" class="file-input" required accept=".pdf,.doc,.docx,.jpg,.jpeg,.png">
                <label for="file" class="file-input-label" id="fileLabel">
                  <i class="fas fa-cloud-upload-alt"></i>
                  <span>Choose file or drag & drop</span>
                </label>
              </div>
              <div class="file-info">
                Supported: PDF, DOC, DOCX, JPG, PNG (Max 10MB)
              </div>
            </div>

            <div class="form-group full-width">
              <button type="submit" class="submit-button" id="submitBtn">
                <i class="fas fa-upload"></i>
                <span>Upload Patient File</span>
                <div class="loading-spinner" id="loadingSpinner"></div>
              </button>
              <div class="progress-bar" id="progressBar">
                <div class="progress-fill" id="progressFill"></div>
              </div>
            </div>
          </div>

          <div class="security-notice">
            <i class="fas fa-shield-alt"></i>
            <span>All data is encrypted and HIPAA compliant</span>
          </div>

          <div class="message" id="message"></div>
        </div>
      </form>
    </div>
  </div>

  <script>
    // Get form elements
    const form = document.getElementById("uploadForm");
    const messageDiv = document.getElementById("message");
    const fileInput = document.getElementById("file");
    const fileLabel = document.getElementById("fileLabel");
    const submitBtn = document.getElementById("submitBtn");
    const loadingSpinner = document.getElementById("loadingSpinner");
    const progressBar = document.getElementById("progressBar");
    const progressFill = document.getElementById("progressFill");

    // File handling
    fileInput.addEventListener("change", handleFileSelect);
    
    function handleFileSelect(e) {
      const file = e.target.files[0];
      if (file) {
        fileLabel.classList.add("has-file");
        fileLabel.innerHTML = `<i class="fas fa-file-check"></i><span>${file.name}</span>`;
      } else {
        resetFileInput();
      }
    }

    function resetFileInput() {
      fileLabel.classList.remove("has-file");
      fileLabel.innerHTML = `<i class="fas fa-cloud-upload-alt"></i><span>Choose file or drag & drop</span>`;
    }

    // Form validation
    function validateForm() {
      const requiredFields = form.querySelectorAll('input[required], select[required]');
      let isValid = true;
      
      requiredFields.forEach(field => {
        if (!field.value.trim()) {
          isValid = false;
          field.style.borderColor = 'var(--error-color)';
        } else {
          field.style.borderColor = '';
        }
      });
      
      return isValid;
    }

    // Show messages
    function showMessage(text, type) {
      messageDiv.textContent = text;
      messageDiv.className = `message ${type}`;
      messageDiv.style.display = 'block';
      
      setTimeout(() => {
        messageDiv.style.display = 'none';
      }, 5000);
    }

    // Progress bar
    function simulateProgress() {
      progressBar.style.display = 'block';
      let progress = 0;
      const interval = setInterval(() => {
        progress += Math.random() * 15;
        if (progress > 90) progress = 90;
        progressFill.style.width = progress + '%';
      }, 200);
      return interval;
    }

    // Auto-calculate age from DOB
    document.getElementById('dob').addEventListener('change', function() {
      const dob = new Date(this.value);
      const today = new Date();
      let age = today.getFullYear() - dob.getFullYear();
      const monthDiff = today.getMonth() - dob.getMonth();
      
      if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < dob.getDate())) {
        age--;
      }
      
      if (age >= 0 && age <= 150) {
        document.getElementById('age').value = age;
      }
    });

    // Form submission
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      
      if (!validateForm()) {
        showMessage("Please fill in all required fields.", "error");
        return;
      }

      const file = fileInput.files[0];
      if (!file) {
        showMessage("Please select a file.", "error");
        return;
      }

      if (file.size > 10 * 1024 * 1024) {
        showMessage("File size must be less than 10MB.", "error");
        return;
      }

      // Show loading
      submitBtn.disabled = true;
      loadingSpinner.style.display = 'block';
      submitBtn.querySelector('span').textContent = 'Uploading...';
      
      const progressInterval = simulateProgress();

      const reader = new FileReader();
      
      reader.onload = async function() {
        const base64Data = reader.result.split(",")[1];
        const data = {
          patient_id: document.getElementById("patient_id").value,
          name: document.getElementById("name").value,
          age: document.getElementById("age").value,
          gender: document.getElementById("gender").value,
          dob: document.getElementById("dob").value,
          phone: document.getElementById("phone").value,
          emergency_contact: document.getElementById("emergency_contact").value,
          email: document.getElementById("email").value,
          address: document.getElementById("address").value,
          blood_group: document.getElementById("blood_group").value,
          marital_status: document.getElementById("marital_status").value,
          department: document.getElementById("department").value,
          doctor_name: document.getElementById("doctor_name").value,
          medical_history: document.getElementById("medical_history").value,
          document_type: document.getElementById("document_type").value,
          priority: document.getElementById("priority").value,
          filename: file.name,
          file_content: base64Data
        };

        try {
          const response = await fetch("https://45c8ek1du3.execute-api.ap-south-1.amazonaws.com/dev/upload", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
          });

          const result = await response.json();
          
          clearInterval(progressInterval);
          progressFill.style.width = '100%';
          
          setTimeout(() => {
            showMessage("File uploaded successfully! Patient record saved.", "success");
            form.reset();
            resetFileInput();
            progressBar.style.display = 'none';
            progressFill.style.width = '0%';
          }, 500);
          
        } catch (error) {
          clearInterval(progressInterval);
          progressBar.style.display = 'none';
          progressFill.style.width = '0%';
          showMessage("Upload failed! Please try again.", "error");
        } finally {
          submitBtn.disabled = false;
          loadingSpinner.style.display = 'none';
          submitBtn.querySelector('span').textContent = 'Upload Patient File';
        }
      };
      reader.readAsDataURL(file);
    });
  </script>
</body>
</html>